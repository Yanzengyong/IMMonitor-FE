(function(t){function e(e){for(var n,o,i=e[0],c=e[1],u=e[2],l=0,p=[];l<i.length;l++)o=i[l],r[o]&&p.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},s=[];function o(t){return i.p+"static/js/"+({about:"about"}[t]||t)+"."+{about:"2b6705d6"}[t]+".js"}function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(t){var e=[],a=r[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise(function(e,n){a=r[t]=[e,n]});e.push(a[2]=n);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=o(t),s=function(e){c.onerror=c.onload=null,clearTimeout(u);var a=r[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+n+": "+s+")");o.type=n,o.request=s,a[1](o)}r[t]=void 0}};var u=setTimeout(function(){s({type:"timeout",target:c})},12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=u;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0134":function(t,e,a){},"034f":function(t,e,a){"use strict";var n=a("85ec"),r=a.n(n);r.a},"16e0":function(t,e,a){},"3f08":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var n,r=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],i=a("2f62"),c={name:"app"},u=c,l=(a("034f"),a("2877")),d=Object(l["a"])(u,s,o,!1,null,null,null),p=d.exports,m=a("8c4f"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat_page_container"},[t._l(t.groups,function(t){return a("GroupPanel",{key:t.id,staticClass:"chat_window",attrs:{group:t}})}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.previewImgUrl,expression:"previewImgUrl"}],staticClass:"preview-image-box",on:{click:function(e){return t.$store.commit("SET_PREVIEW_IMG_URL",null)}}},[a("img",{attrs:{src:t.previewImgUrl,alt:""}})])],2)},h=[],f=a("cebc"),_=(a("0134"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-window-container"},[n("Drawer",{attrs:{title:t.group.NickName+"（成员列表）",closable:!1},model:{value:t.showGroupList,callback:function(e){t.showGroupList=e},expression:"showGroupList"}},t._l(t.group.MemberList,function(e,r){return n("p",{key:r,staticClass:"chat-groupList"},[n("img",{attrs:{src:a("8505")}}),n("span",[t._v(t._s(e.NickName))])])}),0),n("div",{staticClass:"chat-header"},[n("span",[n("img",{attrs:{src:t.group.HeadImgUrl,alt:""}}),n("b",[t._v(t._s(t.group.NickName))])]),n("div",{staticClass:"chat-groupNum",on:{click:t.openGroupPeopleList}},[n("CustormIcon",{attrs:{icon:"icon-groupNum"}}),n("span",[t._v("("+t._s(t.group.MemberCount)+"人)")])],1)]),n("div",{staticClass:"chat-content"},[n("div",{ref:"scrollPanel",staticClass:"chat-inner-container"},[n("div",{staticClass:"content"},[n("ul",t._l(t.group.msg_list,function(e){return n("li",{key:e.MsgId,staticClass:"response-chat"},[n("Message",{attrs:{"response-style":t.userInfo.UserName!==e.FromUserName?"left":"right",type:e.Type,content:e.Content,detectedArr:e.detectedArr,fileUrl:e.FilePath,headImgUrl:e.UserHeadImage}})],1)}),0)])])]),n("div",{staticClass:"chat-input-box"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.introduct,expression:"introduct"}],attrs:{placeholder:"Add a bio to your profile"},domProps:{value:t.introduct},on:{input:function(e){e.target.composing||(t.introduct=e.target.value)}}})])],1)}),v=[],w=(a("affc"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return"left"===t.responseStyle&&"Text"===t.type?n("div",{staticClass:"response-chat"},[n("img",{attrs:{src:t.headImgUrl,alt:""}}),n("div",{staticClass:"chat-left"},[n("p",[t._v(t._s(t.content))]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.isDanger,expression:"isDanger"}]},t._l(t.detectedArr,function(e,a){return n("a",{key:a,style:{backgroundColor:t.formatTipBg(e.result_label)},attrs:{title:t.formatTipContent(e.result_label)}},[t._v("\n        "+t._s(t.formatTip(e.result_label))+"\n      ")])}),0)])]):"right"===t.responseStyle&&"Text"===t.type?n("div",{staticClass:"send-chat"},[n("div",{staticClass:"chat-right"},[n("p",[t._v(t._s(t.content))]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.isDanger,expression:"isDanger"}]},t._l(t.detectedArr,function(e,a){return n("a",{key:a,style:{backgroundColor:t.formatTipBg(e.result_label)},attrs:{title:t.formatTipContent(e.result_label)}},[t._v("\n        "+t._s(t.formatTip(e.result_label))+"\n      ")])}),0)]),n("img",{attrs:{src:t.headImgUrl?t.headImgUrl:a("8505"),alt:""}})]):"left"===t.responseStyle&&"Audio"===t.type?n("div",{staticClass:"response-audio-chat"},[n("div",{staticClass:"audio-chat-box-left"},[n("img",{attrs:{src:t.headImgUrl?t.headImgUrl:a("9515")}}),n("div",{staticClass:"chat-left",on:{click:t.playAudioFn}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isDanger,expression:"isDanger"}]},t._l(t.detectedArr,function(e,a){return n("a",{key:a,style:{backgroundColor:t.formatTipBg(e.result_label)},attrs:{title:t.formatTipContent(e.result_label)}},[t._v("\n          "+t._s(t.formatTip(e.result_label))+"\n        ")])}),0),n("CustormIcon",{attrs:{icon:t.leftAudioPlay}}),n("b",[t._v(t._s(t.countTime)+"s")])],1)]),n("div",{staticClass:"audioText-left"},[n("p",[t._v(t._s(t.content))])])]):"right"===t.responseStyle&&"Audio"===t.type?n("div",{staticClass:"send-audio-chat"},[n("div",{staticClass:"audio-chat-box-right"},[n("div",{staticClass:"chat-right",on:{click:t.playAudioFn}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isDanger,expression:"isDanger"}]},t._l(t.detectedArr,function(e,a){return n("a",{key:a,style:{backgroundColor:t.formatTipBg(e.result_label)},attrs:{title:t.formatTipContent(e.result_label)}},[t._v("\n          "+t._s(t.formatTip(e.result_label))+"\n        ")])}),0),n("b",[t._v(t._s(t.countTime)+"s")]),n("CustormIcon",{attrs:{icon:t.rightAudioPlay}})],1),n("img",{attrs:{src:t.headImgUrl?t.headImgUrl:a("8505")}})]),n("div",{staticClass:"audioText-right"},[n("p",[t._v(t._s(t.content))])])]):"left"===t.responseStyle&&"Image"===t.type?n("div",{staticClass:"response-image-chat"},[n("div",{staticClass:"image-chat-box-left"},[n("img",{attrs:{src:t.headImgUrl?t.headImgUrl:a("9515")}}),n("div",{staticClass:"chat-left",on:{click:t.checkImage}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isDanger,expression:"isDanger"}]},t._l(t.detectedArr,function(e,a){return n("a",{key:a,style:{backgroundColor:t.formatTipBg(e.result_label)},attrs:{title:t.formatTipContent(e.result_label)}},[t._v("\n          "+t._s(t.formatTip(e.result_label))+"\n        ")])}),0),n("img",{attrs:{src:t.NewFileUrl,alt:""}})])])]):"right"===t.responseStyle&&"Image"===t.type?n("div",{staticClass:"send-image-chat"},[n("div",{staticClass:"image-chat-box-right"},[n("div",{staticClass:"chat-right",on:{click:t.checkImage}},[n("img",{attrs:{src:t.NewFileUrl,alt:""}}),n("span",{directives:[{name:"show",rawName:"v-show",value:t.isDanger,expression:"isDanger"}]},t._l(t.detectedArr,function(e,a){return n("a",{key:a,style:{backgroundColor:t.formatTipBg(e.result_label)},attrs:{title:t.formatTipContent(e.result_label)}},[t._v("\n          "+t._s(t.formatTip(e.result_label))+"\n        ")])}),0)]),n("img",{attrs:{src:t.headImgUrl?t.headImgUrl:a("8505")}})])]):t._e()}),y=[],b=(a("f66d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{class:"icon "+t.className,attrs:{"aria-hidden":"true"},on:{click:t.clickFn}},[a("use",{attrs:{"xlink:href":"#"+t.icon}})])}),C=[],I={name:"iconComponent",props:{icon:{type:String,default:""},className:{type:String,default:""}},methods:{clickFn:function(){this.$emit("click")}}},x=I,k=(a("acfe"),Object(l["a"])(x,b,C,!1,null,"5921b414",null)),S=k.exports,T={name:"weChatNewsComponent",data:function(){return{leftAudioPlay:"icon-goutongye_yuyin_you_00",rightAudioPlay:"icon-goutongye_yuyin_zuo_00"}},computed:{NewFileUrl:function(){return"http://localhost:5000".concat(this.fileUrl)}},components:{CustormIcon:S},props:{responseStyle:{type:String},type:{type:String,default:"Text"},content:{type:String,default:""},detectedArr:{type:Array,default:[]},fileUrl:{type:String},headImgUrl:{type:String},countTime:{type:String,default:"--"},isDanger:{type:Boolean,default:!0}},methods:{playAudioFn:function(){this.$emit("click",this.fileUrl)},formatTipContent:function(t){switch(t){case 1:return"色情";case 2:return"性感";case 3:return"暴恐";case 4:return"恶心";case 5:return"水印码";case 8:return"政治人物";case 9:return"敏感词";case 21:return"暴恐违禁";case 22:return"文本色情";case 23:return"政治敏感";case 24:return"恶意推广";case 25:return"低俗辱骂"}},formatTip:function(t){switch(t){case 1:return"色";case 2:return"性";case 3:return"暴";case 4:return"恶";case 5:return"水";case 8:return"政";case 9:return"敏";case 21:return"暴";case 22:return"色";case 23:return"政";case 24:return"恶";case 25:return"骂"}},formatTipBg:function(t){switch(t){case 1:return"#f9dd15";case 2:return"#f99315";case 3:return"#f91515";case 4:return"#58f915";case 5:return"#1590f9";case 8:return"#171615";case 9:return"#ea5b17";case 21:return"#f91515";case 22:return"#f9dd15";case 23:return"#171615";case 24:return"#58f915";case 25:return"#ea7817"}},checkImage:function(){this.$store.commit("SET_PREVIEW_IMG_URL",this.NewFileUrl)}}},U=T,E=Object(l["a"])(U,w,y,!1,null,null,null),N=E.exports,M={data:function(){return{isRead:!0,showGroupList:!1,leftAudioPlay:"icon-goutongye_yuyin_you_00",rightAudioPlay:"icon-goutongye_yuyin_zuo_00",introduct:"",source:"http://music.163.com/song/media/outer/url?id=431795489.mp3",altogetherTimer:null,accomplishData:null}},computed:Object(f["a"])({},Object(i["b"])(["userInfo","groups"])),updated:function(){console.log(this.groups),this.$refs.scrollPanel.scrollTop=this.$refs.scrollPanel.scrollHeight},props:{group:null},components:{CustormIcon:S,Message:N},methods:{openGroupPeopleList:function(){this.showGroupList=!0}}},O=M,A=Object(l["a"])(O,_,v,!1,null,null,null),P=A.exports,H={name:"home",data:function(){return{showPerviewImage:!1}},components:{GroupPanel:P},computed:Object(f["a"])({},Object(i["b"])(["userInfo","groups","previewImgUrl"])),mounted:function(){},methods:{get_msg:function(){}}},G=H,R=Object(l["a"])(G,g,h,!1,null,null,null),j=R.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("Layout",{staticClass:"container"},[n("Sider",{ref:"side1",attrs:{"hide-trigger":"",collapsible:"",width:230,"collapsed-width":78},model:{value:t.isCollapsed,callback:function(e){t.isCollapsed=e},expression:"isCollapsed"}},[n("div",{staticClass:"project_name"},[n("span",[t._v("通讯软件危险监测系统")])]),n("Menu",{class:t.menuitemClasses,attrs:{"on-open-change":t.selectMenuFn,"active-name":"1-1",theme:"dark",width:"auto"}},t._l(t.menu,function(e,a){return n("MenuItem",{key:a,staticClass:"menuList",attrs:{name:e.name,to:e.path}},[n("Icon",{attrs:{type:e.icon}}),n("span",[t._v(t._s(e.title))])],1)}),1)],1),n("Layout",[n("Header",{staticClass:"layout-header-bar"},[n("div",{staticClass:"layout-header-bar-left"},[n("Icon",{class:t.rotateIcon,style:{margin:"0 20px"},attrs:{type:"md-menu",size:"40"},on:{click:t.collapsedSider}}),n("div",{staticClass:"layout-header-bar-left-company"},[n("img",{attrs:{src:a("9d64"),alt:""}}),n("span",[t._v("国家工程实验室")])])],1),n("div",{staticClass:"layout-header-bar-right"},[n("Dropdown",{staticStyle:{"margin-left":"20px"},attrs:{trigger:"click"}},[n("a",{attrs:{href:"javascript:void(0)"}},[n("Avatar",{attrs:{shape:"square",src:t.selfHeadImage,size:"large"}}),n("Icon",{staticClass:"avatar-icon",attrs:{type:"md-arrow-dropdown"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",[t._v("个人中心")]),n("DropdownItem",[t._v("登出")])],1)],1)],1)]),n("Content",{style:{margin:"1px",background:"#fff",width:"100%",overflow:"scroll",padding:"20px"}},[n("router-view")],1)],1)],1)],1)},$=[],D=(a("7514"),a("5176")),F=a.n(D),B=(a("96cf"),a("3b8d")),V=a("bc3a"),q=a.n(V),W={name:"IndexPage",data:function(){return{isCollapsed:!1,menu:[{title:"控制台",icon:"ios-chatbubbles",name:"1-1",path:"/"},{title:"群管理",icon:"ios-contacts",name:"1-2",path:"/grouplist"},{title:"个人中心",icon:"ios-contact",name:"1-3",path:"/user"}]}},components:{},computed:Object(f["a"])({},Object(i["b"])(["userInfo","groups","selfHeadImage","otherUsersHeadImage"]),{rotateIcon:function(){return["menu-icon",this.isCollapsed?"rotate-icon":""]},menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":""]}}),mounted:function(){console.log(this.userInfo.uin),this.userInfo.uin||this.wxInit()},methods:{collapsedSider:function(){this.$refs.side1.toggleCollapse()},selectMenuFn:function(t){console.log(t)},wxInit:function(){var t=Object(B["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("wxInit");case 3:return e=t.sent,t.next=6,this.$store.dispatch("getSelfHeadImage",{uin:e.data.uin,username:e.data.UserName});case 6:e&&200===e.code&&this.getGroupContact(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),getGroupContact:function(){var t=Object(B["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("getGroupContact");case 3:e=t.sent,e.data.map(function(t){a.$store.dispatch("getGroupHeadImage",{group_id:t.group_id,username:t.UserName}).then(function(e){F()(t,{HeadImgUrl:e})}),a.$store.commit("SET_GROUPS",e.data)}),this.syckCheck(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function e(){return t.apply(this,arguments)}return e}(),syckCheck:function(){var t=Object(B["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("syckCheck");case 3:if(e=t.sent,200!=e.code){t.next=18;break}if(2!=e.data.message_status&&4!=e.data.message_status&&6!=e.data.message_status){t.next=15;break}return t.next=8,this.$store.dispatch("getGroupMsg");case 8:a=t.sent,this.getMegUserHeadImage(a),console.log(a.data.group_msg_list),console.log(this.groups),this.syckCheck(),t.next=16;break;case 15:this.syckCheck();case 16:t.next=19;break;case 18:alert(e.msg);case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](0),console.log("error",t.t0);case 24:case"end":return t.stop()}},t,this,[[0,21]])}));function e(){return t.apply(this,arguments)}return e}(),getMegUserHeadImage:function(t){var e=this;t.data.group_msg_list.msg_list.length>0&&t.data.group_msg_list.msg_list.map(function(a){for(var n=null,r=0;r<e.otherUsersHeadImage.length;r++)if(e.otherUsersHeadImage[r].username===a.FromUserName){n=e.otherUsersHeadImage[r].headPath;break}if(n)F()(a,{UserHeadImage:n}),e.$store.commit("HANDLE_GROUP_MSG",t.data.group_msg_list);else{var s=e.groups.find(function(t){if(t.group_id===a.group_id)return t.EncryChatRoomId});e.$store.dispatch("getOtherHeadImage",{group_id:a.group_id,encry_chatroom_id:s.EncryChatRoomId,username:a.FromUserName,user_nickname:a.FromUserNickName}).then(function(n){e.$store.commit("SET_OTHER_USER_HEAD_IMAGE",{group_id:a.group_id,username:a.FromUserName,headPath:n}),F()(a,{UserHeadImage:n}),e.$store.commit("HANDLE_GROUP_MSG",t.data.group_msg_list)})}})},doCheck:function(){var t=Object(B["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("syckCheck");case 2:e=t.sent,console.log(e);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),doGetMsg:function(){var t=Object(B["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getGroupMsg");case 2:e=t.sent,console.log(e),200==e.code&&e.data&&(this.$store.commit("HANDLE_GROUP_MSG",e.data.group_msg_list),console.log(this.groups));case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},z=W,Q=(a("f4c0"),Object(l["a"])(z,L,$,!1,null,"188ce72f",null)),K=Q.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[t._m(0),a("div",{staticClass:"login_container"},[a("div",{staticClass:"login_qrcode_box"},[a("img",{attrs:{src:t.qrCodeSrc}}),a("h2",{on:{click:t.clickFn}},[t._v(t._s(t.qrCodeMessage))])])]),t._m(1)])},X=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login_header"},[n("img",{staticClass:"logo",attrs:{src:a("7655")}}),n("h2",{staticClass:"title"},[t._v("通讯软件危险侦查系统")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"copyright"},[n("span",[t._v("提升政府治理能力国家工程实验室 ©️ 2018 - 2019")]),n("img",{attrs:{src:a("9d64")}})])}],Y={name:"login",data:function(){return{mobile:"",password:"",qrCodeSrc:null,isLogin:!1,checkLogin:!1,qrCodeMessage:"使用手机微信扫码登录",initCount:0}},created:function(){console.log("this.getQrcode",this.$store),this.getQrcode()},methods:{getQrcode:function(){var t=Object(B["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("getQrcode");case 3:e=t.sent,e&&200===e.code&&(this.qrCodeSrc="data:image/png;base64,".concat(e.data.qrcode),n=setInterval(function(){if(a.initCount+=2,60===a.initCount)return clearInterval(n),void(a.qrCodeMessage="二维码过期，请刷新页面");a.isLogin||a.checkLogin||(a.checkLogin=!0,a.getLoginStatus())},2e3)),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}(),getLoginStatus:function(){var t=Object(B["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("getIsLogin");case 3:e=t.sent,this.checkLogin=!1,200===e.code?(clearInterval(n),this.qrCodeMessage="登录成功",this.isLogin=!0,this.$router.push("/")):201===e.code?this.qrCodeMessage="请在手机上确认登录":400===e.code||(this.qrCodeMessage="登录超时，请重新获取二维码"),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}},t,this,[[0,8]])}));function e(){return t.apply(this,arguments)}return e}(),clickFn:function(){this.getLoginStatus()}}},Z=Y,tt=(a("9735"),Object(l["a"])(Z,J,X,!1,null,"05ac2024",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{attrs:{gutter:16}},[a("i-col",{attrs:{xs:24,md:12,lg:6}},[a("div",{staticClass:"count-card"},[a("div",{staticClass:"icon-box"},[a("Icon",{attrs:{type:"ios-people"}}),a("span",[t._v("群总数")])],1),a("count-to",{attrs:{end:t.statistic.group_count,"count-class":"count-text","unit-class":"unit-class"}})],1)]),a("i-col",{attrs:{xs:24,md:12,lg:6}},[a("div",{staticClass:"count-card"},[a("div",{staticClass:"icon-box",staticStyle:{background:"#19be6b"}},[a("Icon",{attrs:{type:"ios-chatbubbles"}}),a("span",[t._v("总消息数")])],1),a("count-to",{attrs:{end:t.statistic.msg_count,"count-class":"count-text","unit-class":"unit-class"}})],1)]),a("i-col",{attrs:{xs:24,md:12,lg:6}},[a("div",{staticClass:"count-card"},[a("div",{staticClass:"icon-box",staticStyle:{background:"#ed3f14"}},[a("Icon",{attrs:{type:"ios-warning"}}),a("span",[t._v("违规消息数")])],1),a("count-to",{attrs:{end:t.statistic.detect_count,"count-class":"count-text","unit-class":"unit-class"}})],1)]),a("i-col",{attrs:{xs:24,md:12,lg:6}},[a("div",{staticClass:"count-card"},[a("div",{staticClass:"icon-box",staticStyle:{background:"#E46CBB"}},[a("Icon",{attrs:{type:"ios-people"}}),a("span",[t._v("违规消息占比")])],1),a("count-to",{attrs:{end:t.statistic.msg_percent,"count-class":"count-text","unit-class":"unit-class"}},[a("span",{staticClass:"slot-text",attrs:{slot:"right"},slot:"right"},[t._v(" %")])])],1)])],1),a("Row",{attrs:{gutter:16}},[a("i-col",{attrs:{md:24,lg:8}},[a("div",{staticClass:"chart",attrs:{id:"pie"}})]),a("i-col",{attrs:{md:24,lg:16}},[a("div",{staticClass:"chart",attrs:{id:"column"}})])],1),a("div",{staticClass:"section-header"},[t._v("\n    Top3 危险人物词云 \n  ")]),a("Row",{attrs:{gutter:16}},[a("i-col",{attrs:{md:24,lg:8}},[a("div",{staticClass:"wordcloud-header"},[a("img",{attrs:{src:"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2534898382,1324912624&fm=26&gp=0.jpg",alt:""}}),a("span",[t._v("谢红韬")])]),a("div",{staticClass:"chart",attrs:{id:"wordcloud0"}})]),a("i-col",{attrs:{md:24,lg:8}},[a("div",{staticClass:"chart",attrs:{id:"wordcloud1"}})]),a("i-col",{attrs:{md:24,lg:8}},[a("div",{staticClass:"chart",attrs:{id:"wordcloud2"}})])],1)],1)},nt=[],rt=a("e814"),st=a.n(rt),ot=(a("6b54"),a("7f7f"),a("55dd"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"count-to-wrapper"},[t._t("left"),a("p",{staticClass:"content-outer"},[a("span",{class:["count-to-count-text",t.countClass],attrs:{id:t.counterId}},[t._v(t._s(t.init))]),a("i",{class:["count-to-unit-text",t.unitClass]},[t._v(t._s(t.unitText))])]),t._t("right")],2)}),it=[],ct=(a("c5f6"),a("57f2")),ut=a.n(ct),lt=(a("16e0"),{name:"CountTo",props:{init:{type:Number,default:0},startVal:{type:Number,default:0},end:{type:Number,required:!0},decimals:{type:Number,default:0},decimal:{type:String,default:"."},duration:{type:Number,default:2},delay:{type:Number,default:0},uneasing:{type:Boolean,default:!1},usegroup:{type:Boolean,default:!1},separator:{type:String,default:","},simplify:{type:Boolean,default:!1},unit:{type:Array,default:function(){return[[3,"K+"],[6,"M+"],[9,"B+"]]}},countClass:{type:String,default:""},unitClass:{type:String,default:""}},data:function(){return{counter:null,unitText:""}},computed:{counterId:function(){return"count_to_".concat(this._uid)}},methods:{getHandleVal:function(t,e){return{endVal:st()(t/Math.pow(10,this.unit[e-1][0])),unitText:this.unit[e-1][1]}},transformValue:function(t){var e=this.unit.length,a={endVal:0,unitText:""};if(t<Math.pow(10,this.unit[0][0]))a.endVal=t;else for(var n=1;n<e;n++)t>=Math.pow(10,this.unit[n-1][0])&&t<Math.pow(10,this.unit[n][0])&&(a=this.getHandleVal(t,n));return t>Math.pow(10,this.unit[e-1][0])&&(a=this.getHandleVal(t,e)),a},getValue:function(t){var e=0;if(this.simplify){var a=this.transformValue(t),n=a.endVal,r=a.unitText;this.unitText=r,e=n}else e=t;return e}},mounted:function(){var t=this;this.$nextTick(function(){var e=t.getValue(t.end);t.counter=new ut.a(t.counterId,t.startVal,e,t.decimals,t.duration,{useEasing:!t.uneasing,useGrouping:t.useGroup,separator:t.separator,decimal:t.decimal}),setTimeout(function(){t.counter.error||t.counter.start()},t.delay)})},watch:{end:function(t){var e=this.getValue(t);this.counter.update(e)}}}),dt=lt,pt=Object(l["a"])(dt,ot,it,!1,null,null,null),mt=pt.exports,gt=mt,ht=a("313e"),ft=a.n(ht),_t=(a("87a1"),a("7a773"),{name:"home",data:function(){return{statistic:{group_count:0,msg_count:0,detect_count:0,msg_percent:0}}},components:{countTo:gt},computed:Object(f["a"])({},Object(i["b"])(["userInfo","groups"])),mounted:function(){this.getStatistic(),this.drawPie(),this.drawColumn(),this.getWordCloud()},methods:{getStatistic:function(){var t=this;q()({method:"get",url:"http://localhost:5000/analysis/statistic",params:{uin:t.userInfo.uin,username:t.userInfo.UserName},withCredentials:!0}).then(function(e){t.statistic=e.data.data,t.statistic.msg_count>0&&(t.statistic.msg_percent=Math.round(t.statistic.detect_count/t.statistic.msg_count*100))})},drawPie:function(){var t=this;q()({method:"get",url:"http://localhost:5000/analysis/all_group_label_count",params:{uin:t.userInfo.uin},withCredentials:!0}).then(function(e){console.log(e.data.data),t._drawPie(e.data.data)})},drawColumn:function(){var t=this;q()({method:"get",url:"http://localhost:5000/analysis/all_member_danger",params:{uin:t.userInfo.uin},withCredentials:!0}).then(function(e){console.log(e.data.data),t._drawColumn(e.data.data)})},getWordCloud:function(){var t=this;q()({method:"get",url:"http://localhost:5000/analysis/all_member_wordcloud",params:{uin:t.userInfo.uin},withCredentials:!0}).then(function(e){var a=e.data.data,n=[];for(var r in a){var s=[];for(var o in a[r].keywords){var i={name:null,value:0};i.name=o,i.value=a[r].keywords[o],s.push(i)}var c={name:r,keywords:s};n.push(c)}n.sort(function(t,e){return e.keywords.length-t.keywords.length}),n=n.slice(0,3),n.map(function(e,a){e.keywords.length>0&&t._drawWordCloud("wordcloud"+a,e.keywords)})})},_drawPie:function(t){var e=[];for(var a in t)t[a]>0&&e.push({name:a,value:t[a]});var n=ft.a.init(document.getElementById("pie")),r={title:{text:"违规标签",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} 个 ({d}%)"},series:[{name:"违规标签",type:"pie",radius:"60%",data:e,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};n.setOption(r)},_drawColumn:function(t){var e=[],a=0;for(var n in t){var r={name:n,value:t[n].count,groups:t[n].groups};if(e.push(r),++a,a>9)break}e.sort(function(t,e){return e.value-t.value});var s=ft.a.init(document.getElementById("column")),o={title:{text:"危险人员 Top10",x:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{axisLabel:{interval:0},type:"category",data:e.map(function(t){return"".concat(t.name,"\n")+t.groups.join("\n")}),axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"违规消息数",type:"bar",barWidth:"60%",data:e.map(function(t){return t.value}),itemStyle:{normal:{color:function(t){var e=st()(255-23*(t.dataIndex+1)).toString(16),a=st()(16+5*(t.dataIndex+1)).toString(16),n=st()(16+12*(t.dataIndex+1)).toString(16);return"#".concat(e).concat(a).concat(n)}}}}]};s.setOption(o)},_drawWordCloud:function(t,e){var n=new Image;n.src=a("d815");var r=ft.a.init(document.getElementById(t)),s={series:[{type:"wordCloud",shape:"circle",left:"center",top:"center",width:"90%",height:"90%",right:null,bottom:null,sizeRange:[12,60],rotationRange:[-90,90],rotationStep:45,gridSize:8,drawOutOfBound:!1,textStyle:{normal:{fontFamily:"sans-serif",fontWeight:"bold",color:function(){return"rgb("+[Math.round(160*Math.random()),Math.round(160*Math.random()),Math.round(160*Math.random())].join(",")+")"}},emphasis:{shadowBlur:10,shadowColor:"#333"}},data:e}]};r.setOption(s)}}}),vt=_t,wt=Object(l["a"])(vt,at,nt,!1,null,null,null),yt=wt.exports;r["default"].use(m["a"]);var bt=new m["a"]({mode:"hash",base:"/",routes:[{path:"/",name:"",redirect:"/console",component:K,children:[{path:"/console",name:"console",component:j},{path:"/grouplist",name:"grouplist",component:yt}]},{path:"/login",name:"login",component:et},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]}),Ct=a("795b"),It=a.n(Ct),xt="http://localhost:5000";r["default"].use(i["a"]);var kt={state:{userInfo:{uin:null,UserName:"@2f4aed76524f619be4e382173d80bfab",NickName:null,HeadImgUrl:null,loginStatus:null},otherUsersHeadImage:[],selfHeadImage:null},mutations:{SET_LOGIN_STATUS:function(t,e){t.userInfo.loginStatus=e},SET_SELF_HEAD_IMAGE:function(t,e){t.selfHeadImage=e},SET_OTHER_USER_HEAD_IMAGE:function(t,e){t.otherUsersHeadImage.push(e)},SET_UIN:function(t,e){t.userInfo.uin=e},SET_USER_NAME:function(t,e){t.userInfo.UserName=e},SET_NICK_NAME:function(t,e){t.userInfo.NickName=e}},actions:{getQrcode:function(t,e){t.commit;return new It.a(function(t,e){q()({method:"get",url:"".concat(xt,"/wx/login/qrcode"),withCredentials:!0}).then(function(e){t(e.data)})})},getIsLogin:function(t,e){var a=t.commit;return new It.a(function(t,e){q()({method:"get",url:"".concat(xt,"/wx/login/checklogin"),withCredentials:!0}).then(function(e){200===e.data.code&&a("SET_LOGIN_STATUS",!0),t(e.data)})})},wxInit:function(t,e){var a=t.commit;return new It.a(function(t,e){q()({method:"get",url:"".concat(xt,"/wx/login/init"),withCredentials:!0}).then(function(e){e&&e.data&&e.data.data&&(a("SET_UIN",e.data.data.uin),a("SET_USER_NAME",e.data.data.UserName),a("SET_NICK_NAME",e.data.data.NickName)),t(e.data)})})},getSelfHeadImage:function(t,e){var a=t.commit;q()({method:"get",url:"".concat(xt,"/wx/contact/get_head_img"),params:{uin:e.uin,username:e.username},withCredentials:!0}).then(function(t){t&&t.data&&200===t.data.code&&(a("SET_OTHER_USER_HEAD_IMAGE",{username:e.username,headPath:"".concat(xt).concat(t.data.data.FilePath)}),a("SET_SELF_HEAD_IMAGE","".concat(xt).concat(t.data.data.FilePath)))})},getOtherHeadImage:function(t,e){t.commit;return new It.a(function(t,a){q()({method:"get",url:"".concat(xt,"/wx/contact/get_member_head_img"),params:{group_id:e.group_id,encry_chatroom_id:e.encry_chatroom_id,username:e.username,user_nickname:e.user_nickname},withCredentials:!0}).then(function(e){t("".concat(xt).concat(e.data.data.FilePath))})})}}},St=kt,Tt="http://localhost:5000";r["default"].use(i["a"]);var Ut={state:{groups:[],previewImgUrl:null},mutations:{SET_GROUPS:function(t,e){t.groups=e},SET_PREVIEW_IMG_URL:function(t,e){t.previewImgUrl=e},HANDLE_GROUP_MSG:function(t,e){if(e)for(var a=0;a<e.msg_list.length;a++){var n=e.msg_list[a];n.detectedArr=[];for(var r=0;r<e.msg_list_detected.length;r++){var s=e.msg_list_detected[r];s.msg_id==n.MsgId&&n.detectedArr.push(s)}for(var o=0;o<t.groups.length;o++)n.group_id==t.groups[o].group_id&&t.groups[o].msg_list.push(n)}}},actions:{syckCheck:function(){return new It.a(function(t,e){q()({method:"get",url:"".concat(Tt,"/wx/message/sync_check"),withCredentials:!0}).then(function(e){t(e.data)})})},getGroupMsg:function(){return new It.a(function(t,e){q()({method:"get",url:"".concat(Tt,"/wx/message/get_msg"),withCredentials:!0}).then(function(a){if(a&&a.data&&200===a.data.code)return t(a.data);e(a)})})},getGroupContact:function(t,e){var a=t.commit;return new It.a(function(t,e){q()({method:"get",url:"".concat(Tt,"/wx/contact/get_group_contact"),withCredentials:!0}).then(function(n){if(n&&n.data&&200===n.data.code)return a("SET_GROUPS",n.data.data),void t(n.data);e(n)})})},getGroupHeadImage:function(t,e){t.commit;return new It.a(function(t,a){q()({method:"get",url:"".concat(Tt,"/wx/contact/get_head_img"),params:{group_id:e.group_id,username:e.username},withCredentials:!0}).then(function(e){e&&e.data&&200===e.data.code&&t("".concat(Tt).concat(e.data.data.FilePath))})})}}},Et=Ut,Nt={userInfo:function(t){return t.user.userInfo},groups:function(t){return t.group.groups},selfHeadImage:function(t){return t.user.selfHeadImage},previewImgUrl:function(t){return t.group.previewImgUrl},otherUsersHeadImage:function(t){return t.user.otherUsersHeadImage}},Mt=Nt;r["default"].use(i["a"]);var Ot=new i["a"].Store({modules:{user:St,group:Et},getters:Mt}),At=Ot,Pt=a("e069"),Ht=a.n(Pt);a("d310");r["default"].use(Ht.a),r["default"].config.productionTip=!1,new r["default"]({router:bt,store:At,render:function(t){return t(p)}}).$mount("#app")},7655:function(t,e,a){t.exports=a.p+"static/img/policelogo.05ebb374.png"},"7a773":function(t,e,a){},8505:function(t,e,a){t.exports=a.p+"static/img/toux2.adc536ca.jpg"},"85ec":function(t,e,a){},9515:function(t,e,a){t.exports=a.p+"static/img/toux1.9cd1e924.jpeg"},9735:function(t,e,a){"use strict";var n=a("cc6e"),r=a.n(n);r.a},"9d64":function(t,e,a){t.exports=a.p+"static/img/logo.4313d946.png"},acfe:function(t,e,a){"use strict";var n=a("c086"),r=a.n(n);r.a},affc:function(t,e,a){},c086:function(t,e,a){},cc6e:function(t,e,a){},d310:function(t,e,a){},d815:function(t,e,a){t.exports=a.p+"static/img/man.3b57acbb.png"},f4c0:function(t,e,a){"use strict";var n=a("3f08"),r=a.n(n);r.a},f66d:function(t,e,a){}});
//# sourceMappingURL=app.1630b9a8.js.map